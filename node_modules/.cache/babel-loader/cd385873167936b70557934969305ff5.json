{"ast":null,"code":"var _jsxFileName = \"/Users/msukhareva/Documents/projects/uma.tech.v2/src/components/Apply/Apply.jsx\";\nimport React, { Component } from \"react\";\nimport style from \"./apply.scss\";\nimport style2 from \"../Form/form.scss\";\nimport Input from \"../Form/Input.jsx\";\nimport MySelect2 from \"../Form/MySelect2.jsx\";\nimport Textarea from \"../Form/Textarea.jsx\";\nimport Checkbox from \"../Form/Checkbox.jsx\";\nimport CustomizedUpload from \"../Form/CustomizedUpload\";\nimport Result from \"../Form/Result.jsx\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { withTranslation } from \"react-i18next\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nconst useStyles = makeStyles(theme => ({\n  progress: {\n    margin: theme.spacing(2)\n  }\n}));\nconst LightTooltip = withStyles(theme => ({\n  tooltip: {\n    backgroundColor: \"#fff\",\n    color: \"#000\",\n    border: \"solid 1px #707070\",\n    boxShadow: \"none\",\n    fontSize: \".9rem\",\n    borderRadius: \"0px\",\n    fontFamily: \"'FiveYearsLaterRegular', monospace, Roboto, sans-serif\",\n    top: \"-10px\"\n  }\n}))(Tooltip);\n\nclass Apply extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addInput = e => {\n      // const inputName = e.currentTarget.dataset.name;\n      var newInput = \"input-${this.state.inputs.length}\";\n      this.setState(prevState => ({\n        inputs: prevState.inputs.concat([newInput])\n      }));\n\n      if (!this.props.isMobile) {\n        var pageHeight = document.querySelector(\"#apply\").getBoundingClientRect().height;\n        document.querySelector(\".pages\").style.height = \"\".concat(pageHeight + 207, \"px\");\n      }\n    };\n\n    this.state = {\n      showResult: false,\n      success: true,\n      errors: [],\n      requestNumber: null,\n      files: [],\n      maxFilesLength: 1,\n      inputs: [],\n      waitingResult: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.constructor.onFilesChoose = this.constructor.onFilesChoose.bind(this);\n    this.constructor.onFileDelete = this.constructor.onFileDelete.bind(this);\n  }\n\n  static onFileDelete(id) {\n    const validate = Apply.validate;\n    const files = this.state.files;\n    this.setState({\n      files: files.filter(file => file.id !== id)\n    }, () => {\n      document.getElementById(id).value = \"\";\n    });\n  }\n\n  static onFilesChoose(e) {\n    const validate = Apply.validate;\n    const _this$state = this.state,\n          files = _this$state.files,\n          maxFilesLength = _this$state.maxFilesLength;\n    let readyFiles = Array.from(e.target.files).filter(file => file.type.includes(\"video\"));\n    readyFiles.forEach(file => file.id = e.target.id);\n    readyFiles = files.concat(readyFiles).slice(0, maxFilesLength);\n    if (readyFiles.length) this.setState({\n      files: readyFiles\n    }, validate);\n  }\n\n  handleSubmit(event) {\n    this.setState({\n      waitingResult: true\n    });\n    event.preventDefault();\n    const formElement = document.querySelector(\"form\");\n    const formData = new FormData(formElement);\n    const currentLangBtn = document.querySelector(\".switch-language--button.active\");\n    var currentLang = \"ru\";\n    currentLangBtn.classList.contains(\"button-ru\") ? currentLang = \"ru\" : currentLang = \"en\";\n    formData.append(\"lang\", currentLang);\n    const url = \"https://pixelsfest.com/works/add\"; //send to server form data\n\n    fetch(url, {\n      method: \"post\",\n      body: formData\n    }).then(response => {\n      if (response.status !== 200) {\n        console.log(\"Looks like there was a problem. Status Code: \" + response.status);\n        this.setState({\n          success: false\n        });\n        this.setState({\n          errors: [\"Пожалуйста, повторите запрос позже\"]\n        });\n        return;\n      }\n\n      response.json().then(data => {\n        this.setState({\n          waitingResult: false\n        });\n        this.setState({\n          success: data.success\n        });\n        this.setState({\n          showResult: true\n        });\n\n        if (data.requestNumber) {\n          this.setState({\n            requestNumber: data.requestNumber\n          });\n        }\n\n        if (data.errors) {\n          this.setState({\n            errors: data.errors\n          });\n        }\n\n        if (data.success) {\n          document.querySelector(\".form-apply\").reset();\n        }\n      });\n    }).catch(err => {\n      console.log(\"Fetch Error :-S\", err);\n      this.setState({\n        success: false\n      });\n      this.setState({\n        errors: [\"Превышен максимальный размер файла 150Мб. Загрузите, пожалуйста, файл меньшего размера\"]\n      });\n      this.setState({\n        showResult: true\n      });\n    });\n  }\n\n  render() {\n    const onFilesChoose = Apply.onFilesChoose,\n          onFileDelete = Apply.onFileDelete;\n    const _this$state2 = this.state,\n          files = _this$state2.files,\n          maxFilesLength = _this$state2.maxFilesLength;\n    const t = this.props.t;\n    const order = this.props.order;\n    const classes = this.props.classes;\n    return React.createElement(\"div\", {\n      className: \"apply-page page\",\n      id: \"apply\",\n      \"data-order\": order,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mobile-title-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, t(\"dataApply.title\")), React.createElement(\"div\", {\n      className: \"apply-page__content page__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"form-apply\",\n      onSubmit: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, t(\"dataApply.form-title\")), React.createElement(\"div\", {\n      className: \"text1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, t(\"dataApply.description9\"), React.createElement(\"a\", {\n      className: \"download_btn\",\n      href: t(\"dataApply.download_url\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, t(\"dataApply.download\"))), React.createElement(\"div\", {\n      className: \"form-row with-add-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Input, {\n      title: t(\"dataApply.name\"),\n      name: \"author[]\",\n      isRequired: \"required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(LightTooltip, {\n      title: t(\"dataApply.toolip-name\"),\n      placement: \"bottom-end\",\n      className: \"light-tooltip\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"add-input\",\n      onClick: this.addInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"+\"))), this.state.inputs.map(input => React.createElement(\"div\", {\n      className: \"form-row with-add-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(Input, {\n      key: input,\n      name: \"author[]\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Input, {\n      title: t(\"dataApply.email\"),\n      name: \"email\",\n      type: \"email\",\n      isRequired: \"required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(Input, {\n      title: t(\"dataApply.country\"),\n      name: \"country\",\n      isRequired: \"required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(Input, {\n      title: t(\"dataApply.website\"),\n      name: \"website\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(Textarea, {\n      title: t(\"dataApply.shortbiography\"),\n      name: \"shortbiography\",\n      rows: 10,\n      iSplaceholder: t(\"dataApply.work_short_desc_pl\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(MySelect2, {\n      options: this.props.category_options,\n      title: t(\"dataApply.category\"),\n      name: \"category_id\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(Input, {\n      title: t(\"dataApply.worktitle\"),\n      name: \"worktitle\",\n      isRequired: \"required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(Input, {\n      title: t(\"dataApply.worktitle_en\"),\n      name: \"worktitle_en\",\n      isRequired: \"required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(Textarea, {\n      title: t(\"dataApply.work_short_desc\"),\n      name: \"work_short_desc\",\n      rows: 10,\n      iSplaceholder: t(\"dataApply.work_short_desc_pl\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    })), React.createElement(CustomizedUpload, {\n      accept: \"video/mp4\",\n      id: \"media\",\n      name: \"media\",\n      type: \"file\",\n      files: files,\n      maxFilesLength: maxFilesLength,\n      onFilesChoose: onFilesChoose,\n      onFileDelete: onFileDelete,\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(Checkbox, {\n      title: t(\"dataApply.agreement1\"),\n      name: \"agreement1\",\n      isRequired: \"required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    })), !this.state.showResult && !this.state.waitingResult || this.state.showResult && !this.state.success && !this.state.waitingResult ? React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"send-form\",\n      value: t(\"dataApply.button-text\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }) : null, this.state.waitingResult ? React.createElement(\"div\", {\n      className: \"circular\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, React.createElement(CircularProgress, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    })) : null, this.state.showResult ? React.createElement(Result, {\n      success_text: this.props.success_text,\n      success: this.state.success,\n      requestNumber: this.state.requestNumber,\n      errors: this.state.errors,\n      isMobile: this.props.isMobile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }) : null))));\n  }\n\n}\n\nexport default withTranslation()(Apply);","map":{"version":3,"sources":["/Users/msukhareva/Documents/projects/uma.tech.v2/src/components/Apply/Apply.jsx"],"names":["React","Component","style","style2","Input","MySelect2","Textarea","Checkbox","CustomizedUpload","Result","Tooltip","withStyles","withTranslation","CircularProgress","makeStyles","useStyles","theme","progress","margin","spacing","LightTooltip","tooltip","backgroundColor","color","border","boxShadow","fontSize","borderRadius","fontFamily","top","Apply","constructor","props","addInput","e","newInput","setState","prevState","inputs","concat","isMobile","pageHeight","document","querySelector","getBoundingClientRect","height","state","showResult","success","errors","requestNumber","files","maxFilesLength","waitingResult","handleSubmit","bind","onFilesChoose","onFileDelete","id","validate","filter","file","getElementById","value","readyFiles","Array","from","target","type","includes","forEach","slice","length","event","preventDefault","formElement","formData","FormData","currentLangBtn","currentLang","classList","contains","append","url","fetch","method","body","then","response","status","console","log","json","data","reset","catch","err","render","t","order","classes","map","input","category_options","success_text"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport style from \"./apply.scss\";\nimport style2 from \"../Form/form.scss\";\nimport Input from \"../Form/Input.jsx\";\nimport MySelect2 from \"../Form/MySelect2.jsx\";\nimport Textarea from \"../Form/Textarea.jsx\";\nimport Checkbox from \"../Form/Checkbox.jsx\";\nimport CustomizedUpload from \"../Form/CustomizedUpload\";\nimport Result from \"../Form/Result.jsx\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { withTranslation } from \"react-i18next\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n    progress: {\n        margin: theme.spacing(2)\n    }\n}));\nconst LightTooltip = withStyles(theme => ({\n    tooltip: {\n        backgroundColor: \"#fff\",\n        color: \"#000\",\n        border: \"solid 1px #707070\",\n        boxShadow: \"none\",\n        fontSize: \".9rem\",\n        borderRadius: \"0px\",\n        fontFamily: \"'FiveYearsLaterRegular', monospace, Roboto, sans-serif\",\n        top: \"-10px\"\n    }\n}))(Tooltip);\n\nclass Apply extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showResult: false,\n            success: true,\n            errors: [],\n            requestNumber: null,\n            files: [],\n            maxFilesLength: 1,\n            inputs: [],\n            waitingResult: false\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.constructor.onFilesChoose = this.constructor.onFilesChoose.bind(\n            this\n        );\n        this.constructor.onFileDelete = this.constructor.onFileDelete.bind(\n            this\n        );\n    }\n    addInput = e => {\n        // const inputName = e.currentTarget.dataset.name;\n        var newInput = \"input-${this.state.inputs.length}\";\n        this.setState(prevState => ({\n            inputs: prevState.inputs.concat([newInput])\n        }));\n        if (!this.props.isMobile) {\n            var pageHeight = document\n                .querySelector(\"#apply\")\n                .getBoundingClientRect().height;\n            document.querySelector(\".pages\").style.height = `${pageHeight +\n                207}px`;\n        }\n    };\n    static onFileDelete(id) {\n        const { validate } = Apply;\n        const { files } = this.state;\n        this.setState(\n            {\n                files: files.filter(file => file.id !== id)\n            },\n            () => {\n                document.getElementById(id).value = \"\";\n            }\n        );\n    }\n    static onFilesChoose(e) {\n        const { validate } = Apply;\n        const { files, maxFilesLength } = this.state;\n\n        let readyFiles = Array.from(e.target.files).filter(file =>\n            file.type.includes(\"video\")\n        );\n        readyFiles.forEach(file => (file.id = e.target.id));\n        readyFiles = files.concat(readyFiles).slice(0, maxFilesLength);\n\n        if (readyFiles.length) this.setState({ files: readyFiles }, validate);\n    }\n    handleSubmit(event) {\n        this.setState({ waitingResult: true });\n        event.preventDefault();\n        const formElement = document.querySelector(\"form\");\n        const formData = new FormData(formElement);\n        const currentLangBtn = document.querySelector(\n            \".switch-language--button.active\"\n        );\n        var currentLang = \"ru\";\n        currentLangBtn.classList.contains(\"button-ru\")\n            ? (currentLang = \"ru\")\n            : (currentLang = \"en\");\n        formData.append(\"lang\", currentLang);\n        const url = \"https://pixelsfest.com/works/add\";\n        //send to server form data\n        fetch(url, {\n            method: \"post\",\n            body: formData\n        })\n            .then(response => {\n                if (response.status !== 200) {\n                    console.log(\n                        \"Looks like there was a problem. Status Code: \" +\n                            response.status\n                    );\n                    this.setState({ success: false });\n                    this.setState({\n                        errors: [\"Пожалуйста, повторите запрос позже\"]\n                    });\n                    return;\n                }\n                response.json().then(data => {\n                    this.setState({ waitingResult: false });\n                    this.setState({ success: data.success });\n                    this.setState({ showResult: true });\n\n                    if (data.requestNumber) {\n                        this.setState({ requestNumber: data.requestNumber });\n                    }\n                    if (data.errors) {\n                        this.setState({ errors: data.errors });\n                    }\n                    if (data.success) {\n                        document.querySelector(\".form-apply\").reset();\n                    }\n                });\n            })\n            .catch(err => {\n                console.log(\"Fetch Error :-S\", err);\n                this.setState({ success: false });\n                this.setState({\n                    errors: [\n                        \"Превышен максимальный размер файла 150Мб. Загрузите, пожалуйста, файл меньшего размера\"\n                    ]\n                });\n                this.setState({ showResult: true });\n            });\n    }\n    render() {\n        const { onFilesChoose, onFileDelete } = Apply;\n        const { files, maxFilesLength } = this.state;\n        const { t } = this.props;\n        const order = this.props.order;\n        const { classes } = this.props;\n        return (\n            <div className=\"apply-page page\" id=\"apply\" data-order={order}>\n                <div className=\"mobile-title-page\">{t(\"dataApply.title\")}</div>\n                <div className=\"apply-page__content page__content\">\n                    <div className=\"form-content\">\n                        <form\n                            className=\"form-apply\"\n                            onSubmit={this.handleSubmit.bind(this)}\n                        >\n                            <div className=\"form-title\">\n                                {t(\"dataApply.form-title\")}\n                            </div>\n                            <div className=\"text1\">{t(\"dataApply.description9\")}\n                            <a className=\"download_btn\" href={t(\"dataApply.download_url\")}>\n                                {t(\"dataApply.download\")}\n                            </a>\n                            </div>\n                            <div className=\"form-row with-add-btn\">\n                                <Input\n                                    title={t(\"dataApply.name\")}\n                                    name={\"author[]\"}\n                                    isRequired={\"required\"}\n                                />\n\n                                <LightTooltip\n                                    title={t(\"dataApply.toolip-name\")}\n                                    placement=\"bottom-end\"\n                                    className=\"light-tooltip\"\n                                >\n                                    <div\n                                        className=\"add-input\"\n                                        onClick={this.addInput}\n                                    >\n                                        +\n                                    </div>\n                                </LightTooltip>\n                            </div>\n\n                            {this.state.inputs.map(input => (\n                                <div className=\"form-row with-add-btn\">\n                                    <Input key={input} name={\"author[]\"} />\n                                </div>\n                            ))}\n\n                            <div className=\"form-row\">\n                                <Input\n                                    title={t(\"dataApply.email\")}\n                                    name={\"email\"}\n                                    type={\"email\"}\n                                    isRequired={\"required\"}\n                                />\n                            </div>\n                            <div className=\"form-row\">\n                                <Input\n                                    title={t(\"dataApply.country\")}\n                                    name={\"country\"}\n                                    isRequired={\"required\"}\n                                />\n                            </div>\n                            <div className=\"form-row\">\n                                <Input\n                                    title={t(\"dataApply.website\")}\n                                    name={\"website\"}\n                                />\n                            </div>\n                            <div className=\"form-row\">\n                                <Textarea\n                                    title={t(\"dataApply.shortbiography\")}\n                                    name={\"shortbiography\"}\n                                    rows={10}\n                                    iSplaceholder={t(\n                                        \"dataApply.work_short_desc_pl\"\n                                    )}\n                                />\n                            </div>\n                            <div className=\"form-row\">\n                                <MySelect2\n                                    options={this.props.category_options}\n                                    title={t(\"dataApply.category\")}\n                                    name={\"category_id\"}\n                                />\n                            </div>\n                            <div className=\"form-row\">\n                                <Input\n                                    title={t(\"dataApply.worktitle\")}\n                                    name={\"worktitle\"}\n                                    isRequired={\"required\"}\n                                />\n                            </div>\n                            <div className=\"form-row\">\n                                <Input\n                                    title={t(\"dataApply.worktitle_en\")}\n                                    name={\"worktitle_en\"}\n                                    isRequired={\"required\"}\n                                />\n                            </div>\n                            <div className=\"form-row\">\n                                <Textarea\n                                    title={t(\"dataApply.work_short_desc\")}\n                                    name={\"work_short_desc\"}\n                                    rows={10}\n                                    iSplaceholder={t(\n                                        \"dataApply.work_short_desc_pl\"\n                                    )}\n                                />\n                            </div>\n                            <CustomizedUpload\n                                accept=\"video/mp4\"\n                                id=\"media\"\n                                name=\"media\"\n                                type=\"file\"\n                                files={files}\n                                maxFilesLength={maxFilesLength}\n                                onFilesChoose={onFilesChoose}\n                                onFileDelete={onFileDelete}\n                                hidden\n                            />\n                            <div className=\"form-row\">\n                                <Checkbox\n                                    title={t(\"dataApply.agreement1\")}\n                                    name=\"agreement1\"\n                                    isRequired={\"required\"}\n                                />\n                            </div>\n                            {(!this.state.showResult &&\n                                !this.state.waitingResult) ||\n                            (this.state.showResult &&\n                                !this.state.success &&\n                                !this.state.waitingResult) ? (\n                                <input\n                                    type=\"submit\"\n                                    className=\"send-form\"\n                                    value={t(\"dataApply.button-text\")}\n                                />\n                            ) : null}\n                            {this.state.waitingResult ? (\n                                <div className=\"circular\">\n                                    <CircularProgress />\n                                </div>\n                            ) : null}\n                            {this.state.showResult ? (\n                                <Result\n                                    success_text={this.props.success_text}\n                                    success={this.state.success}\n                                    requestNumber={this.state.requestNumber}\n                                    errors={this.state.errors}\n                                    isMobile={this.props.isMobile}\n                                />\n                            ) : null}\n                        </form>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withTranslation()(Apply);\n"]},"metadata":{},"sourceType":"module"}